PROGRAM EX14;
USES CRT;
TYPE vendedor = RECORD
	codigo_vendedor: INTEGER;
	nome_vendedor: STRING[20];
	mes: INTEGER;
	valor_venda: REAL;
END;
loja = FILE OF vendedor;
VAR L,AUXILIAR: loja;
    V,AUX: vendedor;
    CODIGO_VENDEDOR, MES: INTEGER;
    NOME_VENDEDOR: STRING[20];
    VALOR_VENDA: REAL;
    CONT,K, I, P, POSICAO: INTEGER;
    ACHOU: INTEGER;
BEGIN
CLRSCR;
ASSIGN(L, 'C:\VENDAS.DAT');
{$I-}
RESET(L);
{$I+}
IF IORESULT = 2
   THEN REWRITE(L);
ASSIGN(AUXILIAR, 'C:\AUXILIO.DAT');
REWRITE(AUXILIAR);
K := FILESIZE(L);
ACHOU:=0;
IF K = 0
THEN WRITELN('ARQUIVO DE VENDAS VAZIO')
ELSE BEGIN
     CONT:=0;
     WRITE('DIGITE O C‡DIGO DO VENDEDOR A SER EXCLU÷DO ');
     READLN(CODIGO_VENDEDOR);
     WRITE('DIGITE O MES A SER EXCLU÷DO ');
     READLN(MES);

     WHILE (NOT EOF(L)) DO
     BEGIN
     READ(L,V);
     IF (V.CODIGO_VENDEDOR <> CODIGO_VENDEDOR) OR (V.MES <> MES)
     THEN BEGIN
          SEEK(AUXILIAR,CONT);
          CONT:=CONT+1;
	  AUX.CODIGO_VENDEDOR := V.CODIGO_VENDEDOR;
	  AUX.NOME_VENDEDOR := V.NOME_VENDEDOR;
	  AUX.MES := V.MES;
	  AUX.VALOR_VENDA := V.VALOR_VENDA;
	  WRITE(AUXILIAR, AUX);
          END;
     END;
     RESET(L);
     WHILE (NOT EOF(L)) DO
     BEGIN
     READ(L,V);
     IF (V.CODIGO_VENDEDOR = CODIGO_VENDEDOR) AND (V.MES = MES)
     THEN ACHOU:=1;
     END;
     IF ACHOU = 0
     THEN WRITELN('ESTE VENDEDOR N«O ESTµ CADASTRADO')
     ELSE BEGIN
	  REWRITE(L);
	  RESET(AUXILIAR);
	  WHILE NOT EOF(AUXILIAR) DO
	  BEGIN
	  READ(AUXILIAR, AUX);
	  V.CODIGO_VENDEDOR := AUX.CODIGO_VENDEDOR;
	  V.NOME_VENDEDOR := AUX.NOME_VENDEDOR;
	  V.MES :=  AUX.MES;
	  V.VALOR_VENDA:= AUX.VALOR_VENDA;
	  WRITE(L, V);
	  END;
          WRITELN('VENDEDOR EXCLU÷DO');
          END;
     END;
READLN;
CLOSE(L);
CLOSE(AUXILIAR);
END.
