PROGRAM EX14;
USES CRT;
TYPE vendedor = RECORD
	codigo_vendedor: INTEGER;
	nome_vendedor: STRING[20];
	mes: INTEGER;
	valor_venda: REAL;
	ativo: INTEGER;
END;
loja = FILE OF vendedor;
VAR L: loja;
    V: vendedor;
    CODIGO_VENDEDOR, MES: INTEGER;
    NOME_VENDEDOR: STRING[20];
    VALOR_VENDA: REAL;
    CONT,K, I, P, POSICAO: INTEGER;
    ACHOU : BOOLEAN;
BEGIN
CLRSCR;
ASSIGN(L, 'C:\VENDAS.DAT');
{$I-}
RESET(L);
{$I+}
IF IORESULT = 2
   THEN REWRITE(L);
K := FILESIZE(L);
ACHOU := FALSE;
WRITE('DIGITE O C‡DIGO DO VENDEDOR A SER EXCLU÷DO ');
READLN(CODIGO_VENDEDOR);
WRITE('DIGITE O MES A SER EXCLU÷DO ');
READLN(MES);

WHILE NOT EOF(L) DO
 BEGIN
  READ(L,V);
     IF (V.CODIGO_VENDEDOR = CODIGO_VENDEDOR) AND (V.MES = MES) AND (V.ATIVO = 1)
     THEN BEGIN
	  ACHOU := TRUE;
          K:=FILEPOS(L)-1;
          SEEK(L,K);
          V.ATIVO := 0;
          WRITE(L,V);
          END;
     END;
     IF ACHOU = FALSE
     THEN  WRITELN('ESTE VENDEDOR N«O ESTµ CADASTRADO')
     ELSE  WRITELN('VENDEDOR EXCLU÷DO');
READLN;
CLOSE(L);
END.
