PROGRAM EX23;
USES CRT;
TYPE cliente = RECORD
	numero : INTEGER;
	nome : STRING[20];
	ativo: INTEGER;
	END;
clientes = FILE OF cliente;
TYPE conta = RECORD
	numero_conta : INTEGER;
	numero_cli : INTEGER;
	saldo : REAL;
	ativo: INTEGER;
END;
contas = FILE OF conta;
VAR 	con: contas;
	co: conta;
	cli: clientes;
	cl: cliente;
K, I : INTEGER;
ACHOU_CLI, ACHOU : BOOLEAN;
NUM_CLIENTE: INTEGER;
LETRA, AUX: CHAR;
AUX1: STRING;
BEGIN
CLRSCR;
ASSIGN(CON, 'C:\CONTAS.DAT');
{$I-}
RESET(CON);
{$I+}
IF IORESULT = 2
   THEN REWRITE(CON);
ASSIGN(CLI, 'C:\CLIENTES.DAT');
{$I-}
RESET(CLI);
{$I+}
IF IORESULT = 2
   THEN REWRITE(CLI);
K := FILESIZE(CON);
WRITE('DIGITE A LETRA INICIAL DOS NOMES QUE DESEJA CONSULTAR ');
READLN(LETRA);
ACHOU_CLI:=FALSE;
WHILE NOT EOF(CLI) DO
BEGIN
READ(CLI,CL);
AUX1 := COPY(CL.NOME,1,1);
AUX := UPCASE(AUX1[1]);
LETRA := UPCASE(LETRA);
IF (AUX = LETRA) AND (CL.ATIVO = 1)
THEN BEGIN
	WRITELN('CLIENTE: ',CL.NOME);
        ACHOU_CLI:=TRUE;
        RESET(CON);
        WHILE NOT EOF(CON) DO
        BEGIN
        READ(CON,CO);
        IF (CO.NUMERO_CLI = CL.NUMERO) AND (CO.ATIVO = 1)
        THEN BEGIN
             ACHOU:=TRUE;
             WRITELN('SALDO DA CONTA ',CO.NUMERO_CONTA,' = ',CO.SALDO:5:2);
             END;
        END;
	IF ACHOU = FALSE
	THEN WRITELN('ESTE CLIENTE NÇO TEM CONTA CADASTRADA');
     END;
ACHOU:=FALSE;
END;
IF ACHOU_CLI = FALSE
THEN WRITELN('NÇO EXISTE CLIENTE CADASTRADO COM ESSA LETRA');
CLOSE(CLI);
CLOSE(CON);
READLN;
END.
