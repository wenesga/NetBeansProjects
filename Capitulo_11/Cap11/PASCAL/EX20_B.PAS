PROGRAM EX20;
USES CRT;
TYPE cliente = RECORD
	numero : INTEGER;
	nome : STRING[20];
	ativo: INTEGER;
	END;
clientes = FILE OF cliente;
VAR 	cli: clientes;
	cl: cliente;
K, I : INTEGER;
ACHOU : BOOLEAN;
NUM: INTEGER;
NOME: STRING[20];
BEGIN
CLRSCR;
ASSIGN(CLI, 'C:\CLIENTES.DAT');
{$I-}
RESET(CLI);
{$I+}
IF IORESULT = 2
   THEN REWRITE(CLI);
K := FILESIZE(CLI);
WRITE('DIGITE O NÈMERO DO CLIENTE A SER INCLU÷DO ');
READLN(NUM);
WRITE('DIGITE O NOME DO CLIENTE A SER INCLU÷DO ');
READLN(NOME);
IF K = 0
	THEN BEGIN
		CL.NUMERO := NUM;
		CL.NOME := NOME;
                CL.ATIVO:=1;
		WRITE(CLI,CL);
		WRITELN('CLIENTE INCLU÷DO');
		END
	ELSE BEGIN
		I := 0;
		ACHOU := FALSE;
		WHILE ( I <= (K-1)) DO
			BEGIN
			READ(CLI, CL);
			IF (CL.NUMERO = NUM) AND (CL.ATIVO = 1)
			THEN BEGIN
				ACHOU := TRUE;
				I := K+1;
				END
			ELSE BEGIN
				I := I+1;
				SEEK(CLI, I);
				END;
			END;
		IF ACHOU = TRUE
		THEN WRITELN('JA EXISTE CLIENTE CADASTRADO COM ESTE CODIGO')
		ELSE BEGIN
			SEEK(CLI, K);
			CL.NUMERO := NUM;
			CL.NOME := NOME;
                        CL.ATIVO:=1;
			WRITE(CLI, CL);
			WRITELN('CLIENTE INCLU÷DO');
			END;
		END;
READLN;
CLOSE(CLI);
END.
